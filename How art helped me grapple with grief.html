<html lang="en"><head><script>(function(firebaseConfig, initialAuthToken, appId) {
        window.__firebase_config = firebaseConfig;
        window.__initial_auth_token = initialAuthToken;
        window.__app_id = appId;
            })("\n{\n  \"apiKey\": \"AIzaSyCqyCcs2R2e7AegGjvFAwG98wlamtbHvZY\",\n  \"authDomain\": \"bard-frontend.firebaseapp.com\",\n  \"projectId\": \"bard-frontend\",\n  \"storageBucket\": \"bard-frontend.firebasestorage.app\",\n  \"messagingSenderId\": \"175205271074\",\n  \"appId\": \"1:175205271074:web:2b7bd4d34d33bf38e6ec7b\"\n}\n","eyJhbGciOiJSUzI1NiIsImtpZCI6IjI2NmM5YTIxZDM4NGQzZmU0OGMyZjNhYjNiZmE1NjQ0Yzk0ZmY3Y2UiLCJ0eXAiOiJKV1QifQ.eyJzdWIiOiJmaXJlYmFzZS1hZG1pbnNkay1mYnN2Y0BiYXJkLWZyb250ZW5kLmlhbS5nc2VydmljZWFjY291bnQuY29tIiwiYXVkIjoiaHR0cHM6Ly9pZGVudGl0eXRvb2xraXQuZ29vZ2xlYXBpcy5jb20vZ29vZ2xlLmlkZW50aXR5LmlkZW50aXR5dG9vbGtpdC52MS5JZGVudGl0eVRvb2xraXQiLCJ1aWQiOiIxNTI3OTgxMjc5MjY1NjkxNjk1MiIsImlzcyI6ImZpcmViYXNlLWFkbWluc2RrLWZic3ZjQGJhcmQtZnJvbnRlbmQuaWFtLmdzZXJ2aWNlYWNjb3VudC5jb20iLCJjbGFpbXMiOnsiYXBwSWQiOiJjX2FhYzFlMzdlZjAwNDIwZDFfTmF2aWVkX01haGRhdmlhbl9TdHVkeV9FbmdpbmUuaHRtbC00ODMifSwiZXhwIjoxNzY5MzQ4ODc1LCJpYXQiOjE3NjkzNDUyNzUsImFsZyI6IlJTMjU2In0.mZVIXa6TiViJmbqYDloTI3WUMhtoLAcJ0kaYIA-yYDufzU6IL5y8cgCwwrK3hHYE8iSJDU0WYsqA8jD9LC7mumAfjwdTLT8SfOXhYQ3hJsysl_hdrjk-mD2NSFUmgES-W0bz5HgCP9J9rIMQmEkQxTJ2YA16EVNoIxFwXV5vZteh6nm-4WG1leAlPLaEjaapaPMClKg3QlhRdi6UfI93XmZQyzrIQfUrXyVlEKa6SrbzwlRdd0XTSb2ULOAmWG-1bniAJWPohKLku7QvYJ-hmxAS5eOwIMSHhBhC9XfIMT8tY4iRAZI67vLEugsjajn4_cByVoAaT9oZaoYJRmgvnA","c_aac1e37ef00420d1_Navied_Mahdavian_Study_Engine.html-483")</script><script>'use strict';var h=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,b,d){if(a==Array.prototype||a==Object.prototype)return a;a[b]=d.value;return a};function l(a){a=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var b=0;b<a.length;++b){var d=a[b];if(d&&d.Math==Math)return d}throw Error("Cannot find global object");}var n=l(this);
function p(a,b){if(b)a:{var d=n;a=a.split(".");for(var c=0;c<a.length-1;c++){var e=a[c];if(!(e in d))break a;d=d[e]}a=a[a.length-1];c=d[a];b=b(c);b!=c&&b!=null&&h(d,a,{configurable:!0,writable:!0,value:b})}}function r(a){function b(c){return a.next(c)}function d(c){return a.throw(c)}return new Promise(function(c,e){function f(g){g.done?c(g.value):Promise.resolve(g.value).then(b,d).then(f,e)}f(a.next())})}function t(a){return r(a())}
p("Object.values",function(a){return a?a:function(b){var d=[],c;for(c in b)Object.prototype.hasOwnProperty.call(b,c)&&d.push(b[c]);return d}});p("Array.prototype.includes",function(a){return a?a:function(b,d){var c=this;c instanceof String&&(c=String(c));var e=c.length;d=d||0;for(d<0&&(d=Math.max(d+e,0));d<e;d++){var f=c[d];if(f===b||Object.is(f,b))return!0}return!1}});/*

 MIT License

 Copyright (c) 2017-2023 W.Y.

 Permission is hereby granted, free of charge, to any person obtaining a copy
 of this software and associated documentation files (the "Software"), to deal
 in the Software without restriction, including without limitation the rights
 to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 copies of the Software, and to permit persons to whom the Software is
 furnished to do so, subject to the following conditions:

 The above copyright notice and this permission notice shall be included in
 all copies or substantial portions of the Software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 SOFTWARE.

*/
function u(a,b){const d=a.style;b.backgroundColor&&(d.backgroundColor=b.backgroundColor);b.width&&(d.width=`${b.width}px`);b.height&&(d.height=`${b.height}px`);const c=b.style;c!=null&&Object.keys(c).forEach(e=>{d[e]=c[e]})};var v=(()=>{let a=0;return()=>{a+=1;return`u${`0000${(Math.random()*1679616<<0).toString(36)}`.slice(-4)}${a}`}})();function w(a){const b=[];for(let d=0,c=a.length;d<c;d++)b.push(a[d]);return b}let x=null;function y(a={}){return x?x:a.l?x=a.l:x=w(window.getComputedStyle(document.documentElement))}function z(a,b){return(a=(a.ownerDocument.defaultView||window).getComputedStyle(a).getPropertyValue(b))?parseFloat(a.replace("px","")):0}
function A(a,b={}){var d;if(!(d=b.width)){d=z(a,"border-left-width");var c=z(a,"border-right-width");d=a.clientWidth+d+c}(b=b.height)||(b=z(a,"border-top-width"),c=z(a,"border-bottom-width"),b=a.clientHeight+b+c);return{width:d,height:b}}function B(a){return new Promise((b,d)=>{const c=new Image;c.onload=()=>{c.decode().then(()=>{requestAnimationFrame(()=>b(c))})};c.onerror=d;c.crossOrigin="anonymous";c.decoding="async";c.src=a})}
function C(a){return t(function*(){return Promise.resolve().then(()=>(new XMLSerializer).serializeToString(a)).then(encodeURIComponent).then(b=>`data:image/svg+xml;charset=utf-8,${b}`)})}
function D(a,b,d){return t(function*(){const c=document.createElementNS("http://www.w3.org/2000/svg","svg"),e=document.createElementNS("http://www.w3.org/2000/svg","foreignObject");c.setAttribute("width",`${b}`);c.setAttribute("height",`${d}`);c.setAttribute("viewBox",`0 0 ${b} ${d}`);e.setAttribute("width","100%");e.setAttribute("height","100%");e.setAttribute("x","0");e.setAttribute("y","0");e.setAttribute("externalResourcesRequired","true");c.appendChild(e);e.appendChild(a);return C(c)})}
var E=(a,b)=>{if(a instanceof b)return!0;a=Object.getPrototypeOf(a);return a===null?!1:a.constructor.name===b.name||E(a,b)};function F(a,b){return y(b).map(d=>{const c=a.getPropertyValue(d),e=a.getPropertyPriority(d);return`${d}: ${c}${e?" !important":""};`}).join(" ")}
function G(a,b,d,c){a=window.getComputedStyle(a,d);var e=a.getPropertyValue("content");if(e!==""&&e!=="none"){var f=v();try{b.className=`${b.className} ${f}`}catch(k){return}e=document.createElement("style");var g=e.appendChild;d=`.${f}:${d}`;a.cssText?(c=a.getPropertyValue("content"),c=`${a.cssText} content: '${c.replace(/'|"/g,"")}';`):c=F(a,c);g.call(e,document.createTextNode(`${d}{${c}}`));b.appendChild(e)}};function H(a){return a.search(/^(data:)/)!==-1}function I(a,b,d){return t(function*(){const c=yield fetch(a,b);if(c.status===404)throw Error(`Resource "${c.url}" not found`);const e=yield c.blob();return new Promise((f,g)=>{const k=new FileReader;k.onerror=g;k.onloadend=()=>{try{f(d({o:c,result:k.result}))}catch(m){g(m)}};k.readAsDataURL(e)})})}const J={};function K(a,b,d){let c=a.replace(/\?.*/,"");d&&(c=a);/ttf|otf|eot|woff2?/i.test(c)&&(c=c.replace(/.*\//,""));return b?`[${b}]${c}`:c}
function L(a,b,d){return t(function*(){const c=K(a,b,d.C);if(J[c]!=null)return J[c];d.u&&(a+=(/\?/.test(a)?"&":"?")+(new Date).getTime());let e;try{const f=yield I(a,d.i,({o:g,result:k})=>{b||(b=g.headers.get("Content-Type")||"");return k.split(/,/)[1]});e=`data:${b};base64,${f}`}catch(f){e=d.B||""}return J[c]=e})};const M={P:"application/font-woff",R:"application/font-woff",N:"application/font-truetype",v:"application/vnd.ms-fontobject",H:"image/png",F:"image/jpeg",D:"image/jpeg",A:"image/gif",M:"image/tiff",L:"image/svg+xml",O:"image/webp"};function N(a){return(a=/\.([^./]*?)$/g.exec(a))?a[1]:""};function O(a){return t(function*(){const b=a.toDataURL();return b==="data:,"?a.cloneNode(!1):B(b)})}function aa(a,b){return t(function*(){if(a.currentSrc){var d=document.createElement("canvas");const c=d.getContext("2d");d.width=a.clientWidth;d.height=a.clientHeight;c==null||c.drawImage(a,0,0,d.width,d.height);d=d.toDataURL();return B(d)}d=a.poster;d=yield L(d,M[N(d).toLowerCase()]||"",b);return B(d)})}
function ba(a,b){return t(function*(){try{let d;if(a==null?0:(d=a.contentDocument)==null?0:d.body)return yield P(a.contentDocument.body,b,!0)}catch(d){}return a.cloneNode(!1)})}function ca(a,b){return t(function*(){return E(a,HTMLCanvasElement)?O(a):E(a,HTMLVideoElement)?aa(a,b):E(a,HTMLIFrameElement)?ba(a,b):a.cloneNode(a.tagName!=null&&a.tagName.toUpperCase()==="SVG")})}
function da(a,b,d){return t(function*(){if(b.tagName!=null&&b.tagName.toUpperCase()==="SVG")return b;let c=[];if(a.tagName!=null&&a.tagName.toUpperCase()==="SLOT"&&a.assignedNodes)c=w(a.assignedNodes());else{let e;if(E(a,HTMLIFrameElement)&&((e=a.contentDocument)==null?0:e.body))c=w(a.contentDocument.body.childNodes);else{let f;c=w(((f=a.shadowRoot)!=null?f:a).childNodes)}}if(c.length===0||E(a,HTMLVideoElement))return b;yield c.reduce((e,f)=>e.then(()=>P(f,d)).then(g=>{g&&b.appendChild(g)}),Promise.resolve());
return b})}function ea(a,b,d){const c=b.style;if(c){var e=window.getComputedStyle(a);e.cssText?(c.cssText=e.cssText,c.transformOrigin=e.transformOrigin):y(d).forEach(f=>{let g=e.getPropertyValue(f);f==="font-size"&&g.endsWith("px")&&(g=`${Math.floor(parseFloat(g.substring(0,g.length-2)))-.1}px`);E(a,HTMLIFrameElement)&&f==="display"&&g==="inline"&&(g="block");f==="d"&&b.getAttribute("d")&&(g=`path(${b.getAttribute("d")})`);c.setProperty(f,g,e.getPropertyPriority(f))})}}
function fa(a,b){E(a,HTMLSelectElement)&&(b=Array.from(b.children).find(d=>a.value===d.getAttribute("value")))&&b.setAttribute("selected","")}
function ha(a,b){return t(function*(){var d=a.querySelectorAll?a.querySelectorAll("use"):[];if(d.length===0)return a;var c={};for(var e=0;e<d.length;e++){var f=d[e].getAttribute("xlink:href");if(f){const g=document.querySelector(f);a.querySelector(f)||!g||c[f]||(c[f]=yield P(g,b,!0))}}d=Object.values(c);if(d.length){c=document.createElementNS("http://www.w3.org/1999/xhtml","svg");c.setAttribute("xmlns","http://www.w3.org/1999/xhtml");c.style.position="absolute";c.style.width="0";c.style.height="0";
c.style.overflow="hidden";c.style.display="none";e=document.createElementNS("http://www.w3.org/1999/xhtml","defs");c.appendChild(e);for(f=0;f<d.length;f++)e.appendChild(d[f]);a.appendChild(c)}return a})}
function P(a,b,d){return t(function*(){return d||!b.filter||b.filter(a)?Promise.resolve(a).then(c=>ca(c,b)).then(c=>da(a,c,b)).then(c=>{E(c,Element)&&(ea(a,c,b),G(a,c,":before",b),G(a,c,":after",b),E(a,HTMLTextAreaElement)&&(c.textContent=a.value),E(a,HTMLInputElement)&&c.setAttribute("value",a.value),fa(a,c));return c}).then(c=>ha(c,b)):null})};const Q=/url\((['"]?)([^'"]+?)\1\)/g,ia=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,ja=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function ka(a){const b=[];a.replace(Q,(d,c,e)=>{b.push(e);return d});return b.filter(d=>!H(d))}
function la(a,b,d,c){return t(function*(){try{const e=d?(new URL(b,d||void 0)).toString():b;let f;f=yield L(e,M[N(b).toLowerCase()]||"",c);return a.replace(new RegExp(`(url\\(['"]?)(${b.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1")})(['"]?\\))`,"g"),`$1${f}$3`)}catch(e){}return a})}function ma(a,{I:b}){return b?a.replace(ja,d=>{for(;;){const [c,,e]=ia.exec(d)||[],f=c,g=e;if(!g)return"";if(g===b)return`src: ${f};`}}):a}
function R(a,b,d){return t(function*(){if(a.search(Q)===-1)return a;const c=ma(a,d);return ka(c).reduce((e,f)=>e.then(g=>la(g,f,b,d)),Promise.resolve(c))})};function S(a,b,d){return t(function*(){var c;const e=(c=b.style)==null?void 0:c.getPropertyValue(a);return e?(c=yield R(e,null,d),b.style.setProperty(a,c,b.style.getPropertyPriority(a)),!0):!1})}function na(a,b){return t(function*(){(yield S("background",a,b))||(yield S("background-image",a,b));(yield S("mask",a,b))||(yield S("-webkit-mask",a,b))||(yield S("mask-image",a,b))||(yield S("-webkit-mask-image",a,b))})}
function oa(a,b){return t(function*(){const d=E(a,HTMLImageElement);if(d&&!H(a.src)||E(a,SVGImageElement)&&!H(a.href.baseVal)){var c=d?a.src:a.href.baseVal,e=yield L(c,M[N(c).toLowerCase()]||"",b);yield new Promise((f,g)=>{a.onload=f;a.onerror=b.m?(...k)=>{try{f(b.m(...k))}catch(m){g(m)}}:g;a.decode&&(a.decode=f);a.loading==="lazy"&&(a.loading="eager");d?(a.srcset="",a.src=e):a.href.baseVal=e})}})}
function pa(a,b){return t(function*(){const d=w(a.childNodes).map(c=>T(c,b));yield Promise.all(d).then(()=>a)})}function T(a,b){return t(function*(){E(a,Element)&&(yield na(a,b),yield oa(a,b),yield pa(a,b))})};const U={};function V(a){return t(function*(){var b=U[a];if(b!=null)return b;b=yield(yield fetch(a)).text();b={url:a,cssText:b};return U[a]=b})}function W(a,b){return t(function*(){let d=a.cssText;const c=/url\(["']?([^"')]+)["']?\)/g,e=(d.match(/url\([^)]+\)/g)||[]).map(f=>t(function*(){let g=f.replace(c,"$1");g.startsWith("https://")||(g=(new URL(g,a.url)).href);return I(g,b.i,({result:k})=>{d=d.replace(f,`url(${k})`);return[f,k]})}));return Promise.all(e).then(()=>d)})}
function X(a){if(a==null)return[];const b=[];a=a.replace(/(\/\*[\s\S]*?\*\/)/gi,"");for(var d=RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");;){var c=d.exec(a);if(c===null)break;b.push(c[0])}a=a.replace(d,"");d=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi;for(c=RegExp("((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})","gi");;){let e=d.exec(a);if(e===null)if(e=c.exec(a),e===null)break;else d.lastIndex=c.lastIndex;else c.lastIndex=
d.lastIndex;b.push(e[0])}return b}
function qa(a,b){return t(function*(){const d=[],c=[];a.forEach(e=>{if("cssRules"in e)try{w(e.cssRules||[]).forEach((f,g)=>{if(f.type===CSSRule.IMPORT_RULE){let k=g+1;f=V(f.href).then(m=>W(m,b)).then(m=>X(m).forEach(q=>{try{e.insertRule(q,q.startsWith("@import")?k+=1:e.cssRules.length)}catch(Da){}})).catch(()=>{});c.push(f)}})}catch(f){const g=a.find(k=>k.href==null)||document.styleSheets[0];e.href!=null&&c.push(V(e.href).then(k=>W(k,b)).then(k=>X(k).forEach(m=>{g.insertRule(m,g.cssRules.length)})).catch(()=>
{}))}});return Promise.all(c).then(()=>{a.forEach(e=>{if("cssRules"in e)try{w(e.cssRules||[]).forEach(f=>{d.push(f)})}catch(f){}});return d})})}function ra(a){return a.filter(b=>b.type===CSSRule.FONT_FACE_RULE).filter(b=>b.style.getPropertyValue("src").search(Q)!==-1)}function sa(a,b){return t(function*(){if(a.ownerDocument==null)throw Error("Provided element is not within a Document");var d=w(a.ownerDocument.styleSheets);d=yield qa(d,b);return ra(d)})}
function ta(a){function b(c){(c.style.fontFamily||getComputedStyle(c).fontFamily).split(",").forEach(e=>{d.add(e.trim().replace(/["']/g,""))});Array.from(c.children).forEach(e=>{e instanceof HTMLElement&&b(e)})}const d=new Set;b(a);return d}function ua(a,b){return t(function*(){const d=yield sa(a,b),c=ta(a);return(yield Promise.all(d.filter(e=>c.has(e.style.fontFamily.trim().replace(/["']/g,""))).map(e=>R(e.cssText,e.parentStyleSheet?e.parentStyleSheet.href:null,b)))).join("\n")})}
function va(a,b){return t(function*(){const d=b.j!=null?b.j:b.K?null:yield ua(a,b);if(d){const c=document.createElement("style");c.appendChild(document.createTextNode(d));a.firstChild?a.insertBefore(c,a.firstChild):a.appendChild(c)}})};function wa(a,b={}){return t(function*(){const {width:d,height:c}=A(a,b),e=yield P(a,b,!0);yield va(e,b);yield T(e,b);u(e,b);return yield D(e,d,c)})}
function xa(a,b={}){return t(function*(){const {width:d,height:c}=A(a,b);var e=yield wa(a,b);e=yield B(e);const f=document.createElement("canvas"),g=f.getContext("2d"),k=b.G||window.devicePixelRatio||1,m=b.h||d,q=b.g||c;f.width=m*k;f.height=q*k;!b.J&&(f.width>16384||f.height>16384)&&(f.width>16384&&f.height>16384?f.width>f.height?(f.height*=16384/f.width,f.width=16384):(f.width*=16384/f.height,f.height=16384):f.width>16384?(f.height*=16384/f.width,f.width=16384):(f.width*=16384/f.height,f.height=
16384));f.style.width=`${m}`;f.style.height=`${q}`;b.backgroundColor&&(g.fillStyle=b.backgroundColor,g.fillRect(0,0,f.width,f.height));g.drawImage(e,0,0,f.width,f.height);return f})}function ya(a,b={}){return t(function*(){return(yield xa(a,b)).toDataURL()})};const za=["gemini.google.com","corp.google.com","proxy.googlers.com"];function Y(){return document.body.querySelectorAll('[class*="animate"]').length>0}function Z(a){return t(function*(){try{return yield ya(a,{h:a.offsetWidth,g:a.offsetHeight})}catch(d){var b=a.offsetHeight;const c=document.createElement("canvas");c.width=a.offsetWidth;c.height=b;return c.toDataURL("image/png")}})}
function Aa(){return t(function*(){const a=document.body.offsetWidth,b=document.body.offsetHeight,d=document.body.cloneNode(!0);d.querySelectorAll('[class*="animate"]').forEach(c=>{c.classList.remove(...Array.from(c.classList).filter(e=>e.startsWith("animate")))});d.style.width=`${a}px`;d.style.height=`${b}px`;return d})}
function Ba(a){return t(function*(){let b=document.body;if(Y()){var d=yield Aa();b=d;document.body.appendChild(d)}d=yield Z(b);Y()&&document.body.removeChild(b);window.parent.postMessage({type:"SEND_SCREENSHOT",image:d,topOffset:document.documentElement.scrollTop},a.origin)})}function Ca(a){return t(function*(){const b={type:"SEND_SCREENSHOT_FOR_DATA_VISUALIZATION",image:yield Z(document.body),topOffset:0};window.parent.postMessage(b,a.origin)})}
window.addEventListener("message",a=>t(function*(){if(za.some(d=>a.origin.includes(d))){var b=a.data;b&&(b.type==="MAKE_SCREENSHOT"&&(yield Ba(a)),b.type==="MAKE_SCREENSHOT_FOR_DATA_VISUALIZATION"&&(yield Ca(a)))}}));
</script><script>(function() {
  // Ensure this script is executed only once
  if (window.firebaseAuthBridgeScriptLoaded) {
    return;
  }
  window.firebaseAuthBridgeScriptLoaded = true;

  let nextTokenPromiseId = 0;

  // Stores { resolve, reject } for ongoing token requests
  const pendingTokenPromises = {};

  // Listen for messages from the Host Application
  window.addEventListener('message', function(event) {

    const messageData = event.data;

  if (messageData && messageData.type === 'RESOLVE_NEW_FIREBASE_TOKEN') {
      const { success, token, error, promiseId } = messageData ?? {};
      if (pendingTokenPromises[promiseId]) {
        if (success) {
          pendingTokenPromises[promiseId].resolve(token);
        } else {
          pendingTokenPromises[promiseId].reject(new Error(error || 'Token refresh failed from host.'));
        }
        delete pendingTokenPromises[promiseId];
      }
    }
  });

  // Expose a function for the Generated App to request a new Firebase token
  window.requestNewFirebaseToken = function() {
    const currentPromiseId = nextTokenPromiseId++;
    const promise = new Promise((resolve, reject) => {
      pendingTokenPromises[currentPromiseId] = { resolve, reject };
    });
    if (window.parent && window.parent !== window) {
      window.parent.postMessage({
        type: 'REQUEST_NEW_FIREBASE_TOKEN',
        promiseId: currentPromiseId
      }, '*');
    } else {
      pendingTokenPromises[currentPromiseId].reject(new Error('No parent window to request token from.'));
      delete pendingTokenPromises[currentPromiseId];
    }
    return promise;
  };
})();</script><script>
let realOriginalGetUserMedia = null;
if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
  realOriginalGetUserMedia = navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);
}

(function() {
  if (navigator.mediaDevices && navigator.mediaDevices.__proto__) {
    try {
      Object.defineProperty(navigator.mediaDevices.__proto__, 'getUserMedia', {
        get: function() {
          return undefined; // Or throw an error
        },
        configurable: false
      });
    } catch (error) {
      console.error("Error defining prototype getter:", error);
    }
  }
})();

(function() {
  const pendingMediaResolvers = {};
  let nextMediaPromiseId = 0;

  function requestMediaPermissions(constraints) {
    const mediaPromiseId = nextMediaPromiseId++;
    const promise = new Promise((resolve, reject) => {
      pendingMediaResolvers[mediaPromiseId] = (granted) => {
        delete pendingMediaResolvers[mediaPromiseId];
        resolve(granted);
      };
    });

    window.parent.postMessage({
      type: 'requestMediaPermission',
      constraints: constraints,
      promiseId: mediaPromiseId,
    }, '*');

    return promise;
  }

  let originalGetUserMedia = realOriginalGetUserMedia;

  function interceptGetUserMedia() {
    if (navigator.mediaDevices) {
      Object.defineProperty(navigator.mediaDevices, 'getUserMedia', {
        value: function(constraints) {
          return requestMediaPermissions(constraints).then((granted) => {
            if (granted) {
              if (originalGetUserMedia) {
                return originalGetUserMedia(constraints);
              } else {
                throw new Error("Original getUserMedia not available.");
              }
            } else {
              throw new DOMException('Permission denied', 'NotAllowedError');
            }
          });
        },
        writable: false,
        configurable: false
      });
    }
  }

  interceptGetUserMedia();

  const observer = new MutationObserver(function(mutationsList, observer) {
    for (const mutation of mutationsList) {
      if (mutation.type === 'reconfigured' && mutation.name === 'getUserMedia' && mutation.object === navigator.mediaDevices) {
        interceptGetUserMedia();
      } else if (mutation.type === 'attributes' && mutation.attributeName === 'getUserMedia' && mutation.target === navigator.mediaDevices) {
        interceptGetUserMedia();
      } else if (mutation.type === 'childList' && mutation.addedNodes) {
        mutation.addedNodes.forEach(node => {
          if (node === navigator.mediaDevices) {
            interceptGetUserMedia();
          }
        });
      }
    }
  });

  function interceptSpeechRecognition() {
    if (!window.SpeechRecognition && !window.webkitSpeechRecognition) {
      return;
    }

    const OriginalSpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;

    const SpeechRecognitionWrapper = function(...args) {
      const recognizer = new OriginalSpeechRecognition(...args);
      const originalStart = recognizer.start.bind(recognizer);

      recognizer.start = function() {
        requestMediaPermissions({ audio: true }).then(granted => {
          if (granted) {
            originalStart();
          } else {
            const errorEvent = new SpeechRecognitionErrorEvent('error');
            errorEvent.error = 'not-allowed'; // This is the standard error for permission denial.
            recognizer.dispatchEvent(errorEvent);
          }
        });
      };

      return recognizer;
    };

    SpeechRecognitionWrapper.prototype = OriginalSpeechRecognition.prototype;
    SpeechRecognitionWrapper.prototype.constructor = SpeechRecognitionWrapper;

    if (window.SpeechRecognition) {
      window.SpeechRecognition = SpeechRecognitionWrapper;
    }
    if (window.webkitSpeechRecognition) {
      window.webkitSpeechRecognition = SpeechRecognitionWrapper;
    }
  }

  interceptSpeechRecognition();

  window.addEventListener('message', function(event) {
    if (event.data) {
      if (event.data.type === 'resolveMediaPermission') {
        const { promiseId, granted } = event.data;
        if (pendingMediaResolvers[promiseId]) {
          pendingMediaResolvers[promiseId](granted);
        }
      }
    }
  });

})();</script><script>((function(modelInformation) {
  const originalFetch = window.fetch;
  // TODO: b/421908508 - Move these out of the script and match all generative AI model calls.
  let googleLlmBaseApiUrls = [
    'https://generativelanguage.googleapis.com/v1beta/models/' + modelInformation.textModelName + ':streamGenerateContent',
    'https://generativelanguage.googleapis.com/v1beta/models/' + modelInformation.textModelName + ':generateContent',
    'https://generativelanguage.googleapis.com/v1beta/models/' + modelInformation.imageModelName + ':predict',
    'https://generativelanguage.googleapis.com/v1beta/models/' + modelInformation.imageModelName + ':predictLongRunning',
    'https://generativelanguage.googleapis.com/v1beta/models/' + modelInformation.imageEditModelName + ':generateContent',
    'https://generativelanguage.googleapis.com/v1beta/models/' + modelInformation.imageTransformModelName + ':generateContent',
    'https://generativelanguage.googleapis.com/v1beta/models/' + modelInformation.videoModelName + ':predict',
    'https://generativelanguage.googleapis.com/v1beta/models/' + modelInformation.videoModelName + ':predictLongRunning',
    'https://generativelanguage.googleapis.com/v1beta/models/' + modelInformation.ttsModelName + ':generateContent',
  ];
  modelInformation.deprecatedTextModelNames.forEach((modelName) => {
    googleLlmBaseApiUrls.push(
      'https://generativelanguage.googleapis.com/v1beta/models/' + modelName + ':streamGenerateContent',
      'https://generativelanguage.googleapis.com/v1beta/models/' + modelName + ':generateContent',
    );
  });
  modelInformation.deprecatedImageModelNames.forEach((modelName) => {
    googleLlmBaseApiUrls.push(
      'https://generativelanguage.googleapis.com/v1beta/models/' + modelName + ':predict',
      'https://generativelanguage.googleapis.com/v1beta/models/' + modelName + ':predictLongRunning',
    );
  });

  const pendingFetchResolvers = {};
  let nextPromiseId = 0;

  function handleStringInput(input, optionsArgument) {
    const actualUrl = input;
    const fetchCallArgs = [actualUrl, optionsArgument];
    const effectiveOptions = optionsArgument || {};
    const bodyForApiKeyCheck = effectiveOptions.body;
    const bodyForPostMessage = effectiveOptions.body;
    return { actualUrl, fetchCallArgs, effectiveOptions, bodyForApiKeyCheck, bodyForPostMessage };
  }

  function handleRequestInput(input, optionsArgument) {
    const actualUrl = input.url;
    const fetchCallArgs = [input, optionsArgument];
    const effectiveOptions = { method: input.method, headers: new Headers(input.headers) };
    let bodyForApiKeyCheck;
    let bodyForPostMessage;

    if (optionsArgument) {
      if (optionsArgument.method) effectiveOptions.method = optionsArgument.method;
      if (optionsArgument.headers) effectiveOptions.headers = new Headers(optionsArgument.headers);
      if ('body' in optionsArgument) {
        bodyForApiKeyCheck = optionsArgument.body;
        bodyForPostMessage = optionsArgument.body;
      } else {
        bodyForApiKeyCheck = undefined;
        bodyForPostMessage = input.body;
      }
    } else {
      bodyForApiKeyCheck = undefined;
      bodyForPostMessage = input.body;
    }
    return { actualUrl, fetchCallArgs, effectiveOptions, bodyForApiKeyCheck, bodyForPostMessage };
  }

  window.fetch = function(input, optionsArgument) {
    let actualUrl;
    let fetchCallArgs;
    let effectiveOptions = {};
    let bodyForApiKeyCheck;
    let bodyForPostMessage;

    if (typeof input === 'string') {
      ({actualUrl, fetchCallArgs, effectiveOptions, bodyForApiKeyCheck, bodyForPostMessage} = handleStringInput(input, optionsArgument));
    } else if (input instanceof Request) {
      ({actualUrl, fetchCallArgs, effectiveOptions, bodyForApiKeyCheck, bodyForPostMessage} = handleRequestInput(input, optionsArgument));
    } else {
      return originalFetch.apply(window, [input, optionsArgument]);
    }

    effectiveOptions.method = effectiveOptions.method || 'GET';
    if (!effectiveOptions.headers) {
      effectiveOptions.headers = new Headers();
    }


    if (typeof actualUrl === 'string' && googleLlmBaseApiUrls.some((url) => actualUrl.startsWith(url))) {
      let apiKeyIsNull = true;

      const regex = new RegExp("models/([^:]+)");
      const modelNameMatch = actualUrl.match(regex);
      const modelName = modelNameMatch ? modelNameMatch[1] : 'unspecified';


      try {
        const urlObject = new URL(actualUrl);  // Use URL object for robust parsing
        const apiKeyParam = urlObject.searchParams.get('key');
        if (apiKeyParam) {
          apiKeyIsNull = false;
        }
      } catch (e) {
        // Continue checks even if URL parsing fails
      }

      if (apiKeyIsNull && effectiveOptions.headers) {
        const h = new Headers(effectiveOptions.headers);
        const apiKeyHeaderValue = h.get('X-API-Key') || h.get('x-api-key');
        if (apiKeyHeaderValue) {
          apiKeyIsNull = false;
          return originalFetch.apply(window, fetchCallArgs);
        }
      }

      if (apiKeyIsNull && effectiveOptions.method && ['POST', 'PUT', 'PATCH'].includes(effectiveOptions.method.toUpperCase()) && typeof bodyForApiKeyCheck === 'string') {
        try {
          const bodyData = JSON.parse(bodyForApiKeyCheck);
          if (bodyData && bodyData.apiKey) {
            apiKeyIsNull = false;
            return originalFetch.apply(window, fetchCallArgs);
          }
        } catch (e) {
          // Ignore JSON parsing errors
        }
      }

      if(apiKeyIsNull) {
        const promiseId = nextPromiseId++;
        const promise = new Promise((resolve) => {
          pendingFetchResolvers[promiseId] = (resolvedResponse) => {
            delete pendingFetchResolvers[promiseId];
            resolve(resolvedResponse);
          };
        });

        let serializedBodyForPostMessage;
        if (typeof bodyForPostMessage === 'string' || bodyForPostMessage == null) {
            serializedBodyForPostMessage = bodyForPostMessage;
        } else if (bodyForPostMessage instanceof ReadableStream) {
            serializedBodyForPostMessage = null;
        } else {
            try {
                serializedBodyForPostMessage = JSON.stringify(bodyForPostMessage);
            } catch (e) {
                serializedBodyForPostMessage = null;
            }
        }

        const messageOptions = {
            method: effectiveOptions.method,
            headers: Object.fromEntries(new Headers(effectiveOptions.headers).entries()),
            body: serializedBodyForPostMessage
        };

        window.parent.postMessage({
          type: 'requestFetch',
          url: actualUrl,
          modelName: modelName,
          options: messageOptions,
          promiseId: promiseId,
        }, '*');

        return promise;
      }
      return originalFetch.apply(window, fetchCallArgs);
    }
    return originalFetch.apply(window, fetchCallArgs);
  };

  window.addEventListener('message', function(event) {
    if (event.data && event.data.type === 'resolveFetch') {
      const { promiseId, response } = event.data;
      if (pendingFetchResolvers[promiseId]) {
        try {
          const reconstructedResponse = new Response(response.body, {
            status: response.status,
            statusText: response.statusText,
            headers: new Headers(response.headers),
          });
          pendingFetchResolvers[promiseId](reconstructedResponse);
        } catch (error) {
          pendingFetchResolvers[promiseId](new Response(null, { status: 500, statusText: "Interceptor Response Reconstruction Error" }));
        }
      }
    }
  });

}))({"textModelName":"gemini-2.5-flash-preview-09-2025","imageModelName":"imagen-4.0-generate-001","imageEditModelName":"gemini-2.5-flash-image-preview","imageTransformModelName":"gemini-3-pro-image-preview-11-2025","videoModelName":"veo-2.0-generate-001","ttsModelName":"gemini-2.5-flash-preview-tts","deprecatedTextModelNames":["gemini-2.0-flash","gemini-2.5-flash-preview-04-17","gemini-2.5-flash-preview-05-20"],"deprecatedImageModelNames":["imagen-3.0-generate-001","imagen-3.0-generate-002"]})</script><script>(function() {
  const originalConsoleLog = console.log;
  const originalConsoleError = console.error;

    /**
   * Normalizes an error event or a promise rejection reason into a structured error object.
   * @param {*} errorEventOrReason The error object or reason.
   * @return {object} Structured error data { message, name, stack }.
   */
  function getErrorObject(errorEventOrReason) {
    if (errorEventOrReason instanceof Error) {
      return {
        message: errorEventOrReason.message,
        name: errorEventOrReason.name,
        stack: errorEventOrReason.stack,
      };
    }
    // Fallback for non-Error objects.
    try {
      return {
        message: JSON.stringify(errorEventOrReason),
        name: 'UnknownErrorType',
        stack: null,
      };
    } catch (e) {
      return {
        message: String(errorEventOrReason),
        name: 'UnknownErrorTypeNonStringifiable',
        stack: null,
      };
    }
  }

  /**
   * Converts an array of arguments (from log/error) into a single string.
   * Handles Error objects specially to include their message and stack.
   * @param {Array<*>} args - Arguments passed to console methods.
   * @return {string} A string representation of the arguments.
   */
  function stringifyArgs(args) {
    return args
      .map((arg) => {
        if (arg instanceof Error) {
          const {message, stack} = arg;
          return `Error: ${message}${stack ? ('\nStack: ' + stack) : ''}`;
        }
        if (typeof arg === 'object' && arg !== null) {
          try {
            return JSON.stringify(arg);
          } catch (error) {
            return '[Circular Object]';
          }
        } else {
          return String(arg);
        }
      })
      .join(' ');
  }

  console.log = function(...args) {
    const logString = stringifyArgs(args);
    window.parent.postMessage({ type: 'log', message: logString }, '*');
    originalConsoleLog.apply(console, args);
  };

  console.error = function(...args) {
    let errorData;
    if (args.length > 0 && args[0] instanceof Error) {
      const err = args[0];
      // If the first arg is an Error, capture its details.
      errorData = {
        type: 'error',
        source: 'CONSOLE_ERROR',
        ...getErrorObject(err),
        rawArgsString: stringifyArgs(args.slice(1)),
        timestamp: new Date().toISOString(),
      };
    } else {
      // If not an Error object, treat all args as a general error message.
      errorData = {
        type: 'error',
        source: 'CONSOLE_ERROR',
        message: stringifyArgs(args),
        name: 'ConsoleLoggedError',
        stack: null,
        timestamp: new Date().toISOString(),
      };
    }
    window.parent.postMessage(errorData, '*');
    originalConsoleError.apply(console, args);
  };

  // Listen for global unhandled synchronous errors.
  window.addEventListener('error', function(event) {
    const errorDetails = event.error ? getErrorObject(event.error) : {
      message: event.message,
      name: 'GlobalError',
      stack: null,
      filename: event.filename,
      lineno: event.lineno,
      colno: event.colno,
    };

    window.parent.postMessage({
      type: 'error',
      source: 'global',
      ...errorDetails,
      message: errorDetails.message || event.message,
      timestamp: new Date().toISOString(),
    }, '*');
  });

  // Listen for unhandled promise rejections (asynchronous errors).
  window.addEventListener('unhandledrejection', function(event) {
    const errorDetails = getErrorObject(event.reason);

    window.parent.postMessage({
      type: 'error',
      source: 'unhandledrejection',
      ...errorDetails,
      message: errorDetails.message || 'Unhandled Promise Rejection',
      timestamp: new Date().toISOString(),
    }, '*');
  });

})();</script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Study Guide: Grappling with Grief</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Merriweather:ital,wght@0,300;0,400;0,700;1,300&amp;family=Inter:wght@400;500;600&amp;family=Material+Symbols+Outlined" rel="stylesheet">
    <style>
        .vocab-word { border-bottom: 2px solid #93c5fd; cursor: pointer; color: #1d4ed8; font-weight: 700; transition: all 0.2s; display: inline-block; border-radius: 2px; }
        .vocab-word:hover { background-color: #dbeafe; border-bottom-color: #2563eb; color: #1e3a8a; }
        #floating-card { transition: opacity 0.2s, transform 0.2s; pointer-events: none; z-index: 9999; }
        .modal { transition: opacity 0.2s ease-in-out; }
        .modal.hidden { opacity: 0; pointer-events: none; }
        .modal:not(.hidden) { opacity: 1; pointer-events: auto; }
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: #f1f5f9; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 3px; }
    </style>
<style>*, ::before, ::after{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgb(59 130 246 / 0.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }::backdrop{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgb(59 130 246 / 0.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }/* ! tailwindcss v3.4.17 | MIT License | https://tailwindcss.com */*,::after,::before{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}::after,::before{--tw-content:''}:host,html{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;tab-size:4;font-family:ui-sans-serif, system-ui, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";font-feature-settings:normal;font-variation-settings:normal;-webkit-tap-highlight-color:transparent}body{margin:0;line-height:inherit}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,pre,samp{font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;font-feature-settings:normal;font-variation-settings:normal;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}button,input,optgroup,select,textarea{font-family:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;font-weight:inherit;line-height:inherit;letter-spacing:inherit;color:inherit;margin:0;padding:0}button,select{text-transform:none}button,input:where([type=button]),input:where([type=reset]),input:where([type=submit]){-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dd,dl,figure,h1,h2,h3,h4,h5,h6,hr,p,pre{margin:0}fieldset{margin:0;padding:0}legend{padding:0}menu,ol,ul{list-style:none;margin:0;padding:0}dialog{padding:0}textarea{resize:vertical}input::placeholder,textarea::placeholder{opacity:1;color:#9ca3af}[role=button],button{cursor:pointer}:disabled{cursor:default}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}[hidden]:where(:not([hidden=until-found])){display:none}.fixed{position:fixed}.absolute{position:absolute}.relative{position:relative}.sticky{position:sticky}.inset-0{inset:0px}.top-0{top:0px}.top-24{top:6rem}.bottom-0{bottom:0px}.z-40{z-index:40}.z-50{z-index:50}.z-\[70\]{z-index:70}.mx-1{margin-left:0.25rem;margin-right:0.25rem}.mx-auto{margin-left:auto;margin-right:auto}.mb-2{margin-bottom:0.5rem}.mb-4{margin-bottom:1rem}.mb-6{margin-bottom:1.5rem}.mb-8{margin-bottom:2rem}.mt-1{margin-top:0.25rem}.mt-8{margin-top:2rem}.mt-2{margin-top:0.5rem}.inline-block{display:inline-block}.flex{display:flex}.hidden{display:none}.h-16{height:4rem}.h-6{height:1.5rem}.h-\[80vh\]{height:80vh}.h-full{height:100%}.h-32{height:8rem}.max-h-\[60vh\]{max-height:60vh}.min-h-\[300px\]{min-height:300px}.min-h-\[60vh\]{min-height:60vh}.w-80{width:20rem}.w-full{width:100%}.w-px{width:1px}.max-w-3xl{max-width:48rem}.max-w-7xl{max-width:80rem}.flex-1{flex:1 1 0%}.cursor-pointer{cursor:pointer}.resize-none{resize:none}.flex-col{flex-direction:column}.items-center{align-items:center}.justify-end{justify-content:flex-end}.justify-center{justify-content:center}.justify-between{justify-content:space-between}.gap-1{gap:0.25rem}.gap-12{gap:3rem}.gap-2{gap:0.5rem}.gap-6{gap:1.5rem}.space-y-2 > :not([hidden]) ~ :not([hidden]){--tw-space-y-reverse:0;margin-top:calc(0.5rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(0.5rem * var(--tw-space-y-reverse))}.space-y-6 > :not([hidden]) ~ :not([hidden]){--tw-space-y-reverse:0;margin-top:calc(1.5rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(1.5rem * var(--tw-space-y-reverse))}.space-y-8 > :not([hidden]) ~ :not([hidden]){--tw-space-y-reverse:0;margin-top:calc(2rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(2rem * var(--tw-space-y-reverse))}.self-center{align-self:center}.overflow-hidden{overflow:hidden}.overflow-y-auto{overflow-y:auto}.rounded{border-radius:0.25rem}.rounded-2xl{border-radius:1rem}.rounded-lg{border-radius:0.5rem}.rounded-xl{border-radius:0.75rem}.border{border-width:1px}.border-2{border-width:2px}.border-b{border-bottom-width:1px}.border-t{border-top-width:1px}.border-l-4{border-left-width:4px}.border-dashed{border-style:dashed}.border-blue-500\/30{border-color:rgb(59 130 246 / 0.3)}.border-gray-100{--tw-border-opacity:1;border-color:rgb(243 244 246 / var(--tw-border-opacity, 1))}.border-gray-200{--tw-border-opacity:1;border-color:rgb(229 231 235 / var(--tw-border-opacity, 1))}.border-gray-50{--tw-border-opacity:1;border-color:rgb(249 250 251 / var(--tw-border-opacity, 1))}.border-blue-200{--tw-border-opacity:1;border-color:rgb(191 219 254 / var(--tw-border-opacity, 1))}.bg-amber-500{--tw-bg-opacity:1;background-color:rgb(245 158 11 / var(--tw-bg-opacity, 1))}.bg-blue-600{--tw-bg-opacity:1;background-color:rgb(37 99 235 / var(--tw-bg-opacity, 1))}.bg-blue-900\/50{background-color:rgb(30 58 138 / 0.5)}.bg-gray-300{--tw-bg-opacity:1;background-color:rgb(209 213 219 / var(--tw-bg-opacity, 1))}.bg-gray-50{--tw-bg-opacity:1;background-color:rgb(249 250 251 / var(--tw-bg-opacity, 1))}.bg-gray-900{--tw-bg-opacity:1;background-color:rgb(17 24 39 / var(--tw-bg-opacity, 1))}.bg-green-600{--tw-bg-opacity:1;background-color:rgb(22 163 74 / var(--tw-bg-opacity, 1))}.bg-indigo-600{--tw-bg-opacity:1;background-color:rgb(79 70 229 / var(--tw-bg-opacity, 1))}.bg-slate-50{--tw-bg-opacity:1;background-color:rgb(248 250 252 / var(--tw-bg-opacity, 1))}.bg-slate-900\/80{background-color:rgb(15 23 42 / 0.8)}.bg-white{--tw-bg-opacity:1;background-color:rgb(255 255 255 / var(--tw-bg-opacity, 1))}.bg-white\/90{background-color:rgb(255 255 255 / 0.9)}.bg-slate-100{--tw-bg-opacity:1;background-color:rgb(241 245 249 / var(--tw-bg-opacity, 1))}.bg-blue-50{--tw-bg-opacity:1;background-color:rgb(239 246 255 / var(--tw-bg-opacity, 1))}.bg-gray-100{--tw-bg-opacity:1;background-color:rgb(243 244 246 / var(--tw-bg-opacity, 1))}.bg-gradient-to-t{background-image:linear-gradient(to top, var(--tw-gradient-stops))}.from-gray-900{--tw-gradient-from:#111827 var(--tw-gradient-from-position);--tw-gradient-to:rgb(17 24 39 / 0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to)}.from-black\/60{--tw-gradient-from:rgb(0 0 0 / 0.6) var(--tw-gradient-from-position);--tw-gradient-to:rgb(0 0 0 / 0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to)}.via-gray-900\/40{--tw-gradient-to:rgb(17 24 39 / 0)  var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), rgb(17 24 39 / 0.4) var(--tw-gradient-via-position), var(--tw-gradient-to)}.to-transparent{--tw-gradient-to:transparent var(--tw-gradient-to-position)}.object-cover{object-fit:cover}.p-4{padding:1rem}.p-6{padding:1.5rem}.p-8{padding:2rem}.p-3{padding:0.75rem}.p-2{padding:0.5rem}.px-3{padding-left:0.75rem;padding-right:0.75rem}.px-6{padding-left:1.5rem;padding-right:1.5rem}.py-1{padding-top:0.25rem;padding-bottom:0.25rem}.py-1\.5{padding-top:0.375rem;padding-bottom:0.375rem}.py-10{padding-top:2.5rem;padding-bottom:2.5rem}.py-2{padding-top:0.5rem;padding-bottom:0.5rem}.py-20{padding-top:5rem;padding-bottom:5rem}.py-24{padding-top:6rem;padding-bottom:6rem}.px-2{padding-left:0.5rem;padding-right:0.5rem}.pb-20{padding-bottom:5rem}.pb-4{padding-bottom:1rem}.pr-2{padding-right:0.5rem}.pl-4{padding-left:1rem}.pt-2{padding-top:0.5rem}.text-center{text-align:center}.font-mono{font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace}.font-sans{font-family:ui-sans-serif, system-ui, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"}.font-serif{font-family:ui-serif, Georgia, Cambria, "Times New Roman", Times, serif}.text-3xl{font-size:1.875rem;line-height:2.25rem}.text-5xl{font-size:3rem;line-height:1}.text-base{font-size:1rem;line-height:1.5rem}.text-lg{font-size:1.125rem;line-height:1.75rem}.text-sm{font-size:0.875rem;line-height:1.25rem}.text-xl{font-size:1.25rem;line-height:1.75rem}.text-xs{font-size:0.75rem;line-height:1rem}.font-bold{font-weight:700}.font-light{font-weight:300}.font-medium{font-weight:500}.uppercase{text-transform:uppercase}.italic{font-style:italic}.leading-loose{line-height:2}.leading-relaxed{line-height:1.625}.leading-tight{line-height:1.25}.tracking-wider{letter-spacing:0.05em}.text-amber-500{--tw-text-opacity:1;color:rgb(245 158 11 / var(--tw-text-opacity, 1))}.text-blue-200{--tw-text-opacity:1;color:rgb(191 219 254 / var(--tw-text-opacity, 1))}.text-blue-600{--tw-text-opacity:1;color:rgb(37 99 235 / var(--tw-text-opacity, 1))}.text-gray-200{--tw-text-opacity:1;color:rgb(229 231 235 / var(--tw-text-opacity, 1))}.text-gray-300{--tw-text-opacity:1;color:rgb(209 213 219 / var(--tw-text-opacity, 1))}.text-gray-400{--tw-text-opacity:1;color:rgb(156 163 175 / var(--tw-text-opacity, 1))}.text-gray-700{--tw-text-opacity:1;color:rgb(55 65 81 / var(--tw-text-opacity, 1))}.text-slate-800{--tw-text-opacity:1;color:rgb(30 41 59 / var(--tw-text-opacity, 1))}.text-slate-900{--tw-text-opacity:1;color:rgb(15 23 42 / var(--tw-text-opacity, 1))}.text-white{--tw-text-opacity:1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.text-slate-700{--tw-text-opacity:1;color:rgb(51 65 85 / var(--tw-text-opacity, 1))}.text-gray-500{--tw-text-opacity:1;color:rgb(107 114 128 / var(--tw-text-opacity, 1))}.text-blue-700{--tw-text-opacity:1;color:rgb(29 78 216 / var(--tw-text-opacity, 1))}.text-slate-500{--tw-text-opacity:1;color:rgb(100 116 139 / var(--tw-text-opacity, 1))}.opacity-40{opacity:0.4}.shadow-2xl{--tw-shadow:0 25px 50px -12px rgb(0 0 0 / 0.25);--tw-shadow-colored:0 25px 50px -12px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.shadow-sm{--tw-shadow:0 1px 2px 0 rgb(0 0 0 / 0.05);--tw-shadow-colored:0 1px 2px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.outline-none{outline:2px solid transparent;outline-offset:2px}.ring-1{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(1px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow, 0 0 #0000)}.ring-black\/5{--tw-ring-color:rgb(0 0 0 / 0.05)}.backdrop-blur{--tw-backdrop-blur:blur(8px);-webkit-backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia)}.backdrop-blur-sm{--tw-backdrop-blur:blur(4px);-webkit-backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia)}.transition{transition-property:color, background-color, border-color, fill, stroke, opacity, box-shadow, transform, filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.hover\:bg-amber-600:hover{--tw-bg-opacity:1;background-color:rgb(217 119 6 / var(--tw-bg-opacity, 1))}.hover\:bg-green-700:hover{--tw-bg-opacity:1;background-color:rgb(21 128 61 / var(--tw-bg-opacity, 1))}.hover\:bg-indigo-700:hover{--tw-bg-opacity:1;background-color:rgb(67 56 202 / var(--tw-bg-opacity, 1))}.hover\:bg-blue-50:hover{--tw-bg-opacity:1;background-color:rgb(239 246 255 / var(--tw-bg-opacity, 1))}.hover\:underline:hover{-webkit-text-decoration-line:underline;text-decoration-line:underline}.active\:scale-95:active{--tw-scale-x:.95;--tw-scale-y:.95;transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}@media (min-width: 768px){.md\:text-5xl{font-size:3rem;line-height:1}}@media (min-width: 1024px){.lg\:block{display:block}.lg\:w-1\/3{width:33.333333%}.lg\:w-2\/3{width:66.666667%}.lg\:flex-row{flex-direction:row}}</style></head>
<body class="bg-slate-50 text-slate-800 font-sans">

    <nav class="bg-white/90 backdrop-blur border-b border-gray-200 sticky top-0 z-40 shadow-sm">
        <div class="max-w-7xl mx-auto px-6 h-16 flex justify-between items-center">
            <div class="flex items-center gap-2"><span class="material-symbols-outlined text-blue-600 text-3xl">school</span><span class="font-bold text-xl text-slate-900">Study<span class="text-blue-600">Engine</span></span></div>
            
        </div>
    </nav>

    <div class="relative bg-gray-900 text-white overflow-hidden">
        <div class="absolute inset-0">
            <!-- Unsplash Image: Winter Forest/Solitude to match the cabin theme -->
            <img src="https://images.unsplash.com/photo-1478131143081-80f7f84ca84d?q=80&amp;w=2000&amp;auto=format&amp;fit=crop" alt="Background" class="w-full h-full object-cover opacity-40">
            <div class="absolute inset-0 bg-gradient-to-t from-gray-900 via-gray-900/40 to-transparent"></div>
        </div>
        <div class="relative max-w-7xl mx-auto px-6 py-20">
            <div class="max-w-3xl">
                <span class="inline-block py-1 px-3 rounded bg-blue-900/50 border border-blue-500/30 text-blue-200 text-xs font-bold tracking-wider uppercase mb-4 backdrop-blur-sm">Study Guide</span>
                
                <h1 class="text-3xl md:text-5xl font-serif font-bold mb-4 leading-tight">
                    How art helped me grapple with grief
                </h1>
                
                <p class="text-lg text-gray-200 mb-8 font-light leading-relaxed">
                    A cartoonist's poignant journey into the wilderness to discover how humor and observation can heal the wounds of loss.
                </p>
                
                <div class="flex items-center gap-6 text-sm text-gray-300 font-medium">
                    <div class="flex items-center gap-2"><span class="material-symbols-outlined text-base">person</span> <span>Navied Mahdavian</span></div>
                    <div class="flex items-center gap-2"><span class="material-symbols-outlined text-base">auto_stories</span> <span id="hero-vocab-count">11</span> Words</div>
                </div>
            </div>
        </div>
    </div>

    <div class="max-w-7xl mx-auto px-6 flex flex-col lg:flex-row gap-12 relative pb-20 mt-8">
        <main class="lg:w-2/3 bg-white p-8 rounded-2xl shadow-sm border border-gray-100 min-h-[60vh]">
            <div class="flex justify-between mb-6 border-b border-gray-100 pb-4">
                <h2 class="text-xl font-bold flex items-center gap-2">Transcript</h2>
                <button onclick="toggleTranslations()" class="text-sm text-blue-600 font-medium hover:underline flex items-center gap-1"><span class="material-symbols-outlined text-lg">translate</span> Toggle CN</button>
            </div>
            <div id="transcript-content" class="space-y-8 font-serif text-lg leading-loose text-gray-700"><div class="mb-8 group"><p class="mb-2 text-slate-800 text-lg leading-loose">When I found out my grandmother, my last living grandparent, was dying, my first thought was, "I need to draw her hands." I'm a visual artist, a cartoonist for The New Yorker, and comics writer, so drawing is how I understand much of the world.</p><p class="cn-text hidden text-gray-500 pl-4 border-l-4 border-blue-200 italic mt-2"></p></div><div class="mb-8 group"><p class="mb-2 text-slate-800 text-lg leading-loose">For a long time, my cartoons had been <span class="vocab-word" data-id="impersonal" onmouseenter="showCard(event, 'impersonal')" onmouseleave="hideCard()">impersonal</span>. Commentary on the world around me, sure, but not really about me. The closest my personal life got to influencing my cartoons were cartoons I lifted from things my friends and family had said around me. It was only after my daughter Ellika was born that my personal life began to creep into my cartoons more.</p><p class="cn-text hidden text-gray-500 pl-4 border-l-4 border-blue-200 italic mt-2"> (Ellika) </p></div><div class="mb-8 group"><p class="mb-2 text-slate-800 text-lg leading-loose">Every artist will tell you that their medium is the highest art form. But they're wrong, because cartooning is in fact the highest art form. Cartoons can say so much with so little. With just a few lines, you can express happiness, <span class="vocab-word" data-id="smugness" onmouseenter="showCard(event, 'smugness')" onmouseleave="hideCard()">smugness</span> and sadness.</p><p class="cn-text hidden text-gray-500 pl-4 border-l-4 border-blue-200 italic mt-2"></p></div><div class="mb-8 group"><p class="mb-2 text-slate-800 text-lg leading-loose">This is called face <span class="vocab-word" data-id="pareidolia" onmouseenter="showCard(event, 'pareidolia')" onmouseleave="hideCard()">pareidolia</span>. It's the phenomenon where we see faces in <span class="vocab-word" data-id="inanimate" onmouseenter="showCard(event, 'inanimate')" onmouseleave="hideCard()">inanimate</span> objects. We see ourselves in these cartoonish faces. They're blank canvases onto which we project ourselves. We see faces everywhere, ourselves in everything. It's evolutionary, a survival technique. But how do we convey complex emotions using just lines? Emotions like grief.</p><p class="cn-text hidden text-gray-500 pl-4 border-l-4 border-blue-200 italic mt-2">(Face Pareidolia)</p></div><div class="mb-8 group"><p class="mb-2 text-slate-800 text-lg leading-loose">This became really important to me when I found out that my grandmother was dying. I got to know my grandmother, Homa, in a way I didn't get to know any of my other grandparents, because they all lived and died in Iran, a country I've only ever been to twice and not since I was 10.</p><p class="cn-text hidden text-gray-500 pl-4 border-l-4 border-blue-200 italic mt-2"> Homa </p></div><div class="mb-8 group"><p class="mb-2 text-slate-800 text-lg leading-loose">But Homa lived with my parents for the last 10 years of her life, and in that time, she danced the funky chicken at my wedding, she got to hold my newborn daughter, and she told me stories about Iran before the revolution over morning tea, which was usually around noon because she liked to sleep in.</p><p class="cn-text hidden text-gray-500 pl-4 border-l-4 border-blue-200 italic mt-2"> Homa </p></div><div class="mb-8 group"><p class="mb-2 text-slate-800 text-lg leading-loose">I can still, even today, recall the physical sensation of them, like the smoothness of her nails and even their smell. But not the way they looked, which is why when I found out that she was dying, my first instinct was to try to preserve that memory, my memory of her, by drawing her hands.</p><p class="cn-text hidden text-gray-500 pl-4 border-l-4 border-blue-200 italic mt-2"></p></div><div class="mb-8 group"><p class="mb-2 text-slate-800 text-lg leading-loose">Not surprisingly, when I finally made it there to see her, I didn't have a whole lot of time to sit around drawing because I was busy with other things, things like comforting my mom, comforting my grandmother by doing magic and helping my mom and my sister plan for what would come next.</p><p class="cn-text hidden text-gray-500 pl-4 border-l-4 border-blue-200 italic mt-2"></p></div><div class="mb-8 group"><p class="mb-2 text-slate-800 text-lg leading-loose">It's that classic <span class="vocab-word" data-id="proustian" onmouseenter="showCard(event, 'proustian')" onmouseleave="hideCard()">Proustian</span> experience. Life doesn't mean anything while you're moving through it. It's only when you stop to reflect on it that you can make any sense of it. Sense memory, what Proust calls involuntary memory, contains the essence of the past.</p><p class="cn-text hidden text-gray-500 pl-4 border-l-4 border-blue-200 italic mt-2"></p></div><div class="mb-8 group"><p class="mb-2 text-slate-800 text-lg leading-loose">And so if I wanted to tell the story of my grandma, Homa, I would have to begin with a sensation of her hands. When I set out to write this comic, which was published in the L.A. Times, I wanted to take something complicated and big and make it small.</p><p class="cn-text hidden text-gray-500 pl-4 border-l-4 border-blue-200 italic mt-2"> Homa </p></div><div class="mb-8 group"><p class="mb-2 text-slate-800 text-lg leading-loose">Grief is complicated. I needed to reach a point where I could process my loss to <span class="vocab-word" data-id="distill" onmouseenter="showCard(event, 'distill')" onmouseleave="hideCard()">distill</span> the experience of losing my last living grandparent into its essential parts and make it clear enough that I could actually grieve.</p><p class="cn-text hidden text-gray-500 pl-4 border-l-4 border-blue-200 italic mt-2"></p></div><div class="mb-8 group"><p class="mb-2 text-slate-800 text-lg leading-loose">My family doesn't tend to deal well with grief, which isn't great because we have so much experience with it. When we're trying to dodge grief, we <span class="vocab-word" data-id="caricature" onmouseenter="showCard(event, 'caricature')" onmouseleave="hideCard()">caricature</span> those we've lost. We focus on and exaggerate their most obvious features, which is why sometimes we'll hear somebody say something like, "He was a saint." He probably wasn't.</p><p class="cn-text hidden text-gray-500 pl-4 border-l-4 border-blue-200 italic mt-2"></p></div><div class="mb-8 group"><p class="mb-2 text-slate-800 text-lg leading-loose">When we do that, we're not actually grieving. We're not confronting the person we've lost as a complex individual, flaws and all. Cartooning has allowed me to go narrow, to find the details that are <span class="vocab-word" data-id="emblematic" onmouseenter="showCard(event, 'emblematic')" onmouseleave="hideCard()">emblematic</span>, which opens up into a whole, rich, complex person and to my complicated relationship with them.</p><p class="cn-text hidden text-gray-500 pl-4 border-l-4 border-blue-200 italic mt-2"></p></div><div class="mb-8 group"><p class="mb-2 text-slate-800 text-lg leading-loose">And so I focused on my grandmother's hands, the quivering lines of her <span class="vocab-word" data-id="arthritic" onmouseenter="showCard(event, 'arthritic')" onmouseleave="hideCard()">arthritic</span> fingers, the contours of her veins, now pronounced by the thinning of the skin that she spent so much time caring for. They were beautiful hands, soft from years of moisturizing.</p><p class="cn-text hidden text-gray-500 pl-4 border-l-4 border-blue-200 italic mt-2"></p></div><div class="mb-8 group"><p class="mb-2 text-slate-800 text-lg leading-loose">They were also the hands of someone who was really, really vain, <span class="vocab-word" data-id="emblematic" onmouseenter="showCard(event, 'emblematic')" onmouseleave="hideCard()">emblematic</span> of the gender norms of an Iranian woman of her period, and as a consequence, incapable of dealing with the process of aging well. For example, I can remember this one time she called me into her room, and when I walked in, she was standing there, arms stretched out to her side and topless, and she said, "Look what I've become."</p><p class="cn-text hidden text-gray-500 pl-4 border-l-4 border-blue-200 italic mt-2"></p></div><div class="mb-8 group"><p class="mb-2 text-slate-800 text-lg leading-loose">They were also the hands that she used as she got older and was less capable of caring for herself, to hit those around her, the people she loved the most. Because I didn't actually get to draw her hands when I last saw her, and I don't have any photos of them, I had to use my own hands to draw her hands.</p><p class="cn-text hidden text-gray-500 pl-4 border-l-4 border-blue-200 italic mt-2"></p></div><div class="mb-8 group"><p class="mb-2 text-slate-800 text-lg leading-loose">So I drew my hands old and spotted, my knuckles <span class="vocab-word" data-id="gnarled" onmouseenter="showCard(event, 'gnarled')" onmouseleave="hideCard()">gnarled</span>, and I imagined what it would be like for my hands to no longer be able to perform basic, everyday functions, to no longer be able to draw.</p><p class="cn-text hidden text-gray-500 pl-4 border-l-4 border-blue-200 italic mt-2"></p></div><div class="mb-8 group"><p class="mb-2 text-slate-800 text-lg leading-loose">I regularly use myself as a reference for my comics, and through this, I have become my grandmother, I have become my friends and I've even become my five-year-old daughter. It's a process that's allowed me to experience these stories more deeply, in a physical way, allowing me to inhabit them to come to a fuller, richer understanding of them in context.</p><p class="cn-text hidden text-gray-500 pl-4 border-l-4 border-blue-200 italic mt-2"></p></div><div class="mb-8 group"><p class="mb-2 text-slate-800 text-lg leading-loose">If a loved one's death makes us confront our own <span class="vocab-word" data-id="mortality" onmouseenter="showCard(event, 'mortality')" onmouseleave="hideCard()">mortality</span>, then the process of physically transforming myself into my grandmother or my father, who is slowly dying of kidney failure, has made me confront it in a uniquely deep way. It's a process that's also allowed me to reach a place of deeper empathy and of forgiveness.</p><p class="cn-text hidden text-gray-500 pl-4 border-l-4 border-blue-200 italic mt-2"></p></div><div class="mb-8 group"><p class="mb-2 text-slate-800 text-lg leading-loose">For me, art is about communication. It's about expressing what's most important to us and knowing that other people feel the same way, that we're not alone, which is particularly important when we're grieving.</p><p class="cn-text hidden text-gray-500 pl-4 border-l-4 border-blue-200 italic mt-2"></p></div><div class="mb-8 group"><p class="mb-2 text-slate-800 text-lg leading-loose">It's that distillation of something complex into its simplest terms. For you to see your grandmother or a parent in the curved lines of my grandmother's beautiful hands, and to communicate without words, because words were never the point anyway. Thank you.</p><p class="cn-text hidden text-gray-500 pl-4 border-l-4 border-blue-200 italic mt-2"></p></div></div>
        </main>
        <aside class="hidden lg:block lg:w-1/3">
            <div class="sticky top-24 space-y-6">
                <div class="bg-white rounded-2xl shadow-sm border border-gray-100 p-6 min-h-[300px]">
                    <h3 class="font-bold text-gray-700 mb-4 flex items-center gap-2"><span class="material-symbols-outlined text-amber-500">book_2</span> Vocabulary</h3>
                    <ul id="vocab-list" class="space-y-2 overflow-y-auto pr-2 max-h-[60vh]"><li class="p-3 border-b border-gray-50 flex justify-between hover:bg-blue-50 cursor-pointer" onmouseenter="highlight('arthritic', true)" onmouseleave="highlight('arthritic', false)" onclick="scrollToWord('arthritic')"><span class="font-bold text-sm text-slate-700">Arthritic</span><span class="text-xs bg-slate-100 px-2 py-1 rounded">adjective</span></li><li class="p-3 border-b border-gray-50 flex justify-between hover:bg-blue-50 cursor-pointer" onmouseenter="highlight('caricature', true)" onmouseleave="highlight('caricature', false)" onclick="scrollToWord('caricature')"><span class="font-bold text-sm text-slate-700">Caricature</span><span class="text-xs bg-slate-100 px-2 py-1 rounded">verb</span></li><li class="p-3 border-b border-gray-50 flex justify-between hover:bg-blue-50 cursor-pointer" onmouseenter="highlight('distill', true)" onmouseleave="highlight('distill', false)" onclick="scrollToWord('distill')"><span class="font-bold text-sm text-slate-700">Distill</span><span class="text-xs bg-slate-100 px-2 py-1 rounded">verb</span></li><li class="p-3 border-b border-gray-50 flex justify-between hover:bg-blue-50 cursor-pointer" onmouseenter="highlight('emblematic', true)" onmouseleave="highlight('emblematic', false)" onclick="scrollToWord('emblematic')"><span class="font-bold text-sm text-slate-700">Emblematic</span><span class="text-xs bg-slate-100 px-2 py-1 rounded">adjective</span></li><li class="p-3 border-b border-gray-50 flex justify-between hover:bg-blue-50 cursor-pointer" onmouseenter="highlight('gnarled', true)" onmouseleave="highlight('gnarled', false)" onclick="scrollToWord('gnarled')"><span class="font-bold text-sm text-slate-700">Gnarled</span><span class="text-xs bg-slate-100 px-2 py-1 rounded">adjective</span></li><li class="p-3 border-b border-gray-50 flex justify-between hover:bg-blue-50 cursor-pointer" onmouseenter="highlight('impersonal', true)" onmouseleave="highlight('impersonal', false)" onclick="scrollToWord('impersonal')"><span class="font-bold text-sm text-slate-700">Impersonal</span><span class="text-xs bg-slate-100 px-2 py-1 rounded">adjective</span></li><li class="p-3 border-b border-gray-50 flex justify-between hover:bg-blue-50 cursor-pointer" onmouseenter="highlight('inanimate', true)" onmouseleave="highlight('inanimate', false)" onclick="scrollToWord('inanimate')"><span class="font-bold text-sm text-slate-700">Inanimate</span><span class="text-xs bg-slate-100 px-2 py-1 rounded">adjective</span></li><li class="p-3 border-b border-gray-50 flex justify-between hover:bg-blue-50 cursor-pointer" onmouseenter="highlight('mortality', true)" onmouseleave="highlight('mortality', false)" onclick="scrollToWord('mortality')"><span class="font-bold text-sm text-slate-700">Mortality</span><span class="text-xs bg-slate-100 px-2 py-1 rounded">noun</span></li><li class="p-3 border-b border-gray-50 flex justify-between hover:bg-blue-50 cursor-pointer" onmouseenter="highlight('pareidolia', true)" onmouseleave="highlight('pareidolia', false)" onclick="scrollToWord('pareidolia')"><span class="font-bold text-sm text-slate-700">Pareidolia</span><span class="text-xs bg-slate-100 px-2 py-1 rounded">noun</span></li><li class="p-3 border-b border-gray-50 flex justify-between hover:bg-blue-50 cursor-pointer" onmouseenter="highlight('proustian', true)" onmouseleave="highlight('proustian', false)" onclick="scrollToWord('proustian')"><span class="font-bold text-sm text-slate-700">Proustian</span><span class="text-xs bg-slate-100 px-2 py-1 rounded">adjective</span></li><li class="p-3 border-b border-gray-50 flex justify-between hover:bg-blue-50 cursor-pointer" onmouseenter="highlight('smugness', true)" onmouseleave="highlight('smugness', false)" onclick="scrollToWord('smugness')"><span class="font-bold text-sm text-slate-700">Smugness</span><span class="text-xs bg-slate-100 px-2 py-1 rounded">noun</span></li></ul>
                </div>
            </div>
        </aside>
    </div>

    <div id="floating-card" class="fixed bg-white rounded-xl shadow-2xl border border-gray-200 w-80 overflow-hidden ring-1 ring-black/5 z-50 hidden" style="left: 501.797px; top: 372px;"><div class="h-32 bg-gray-100 overflow-hidden relative"><img src="https://source.unsplash.com/featured/?caricature" class="w-full h-full object-cover"><div class="absolute bottom-0 p-3 w-full bg-gradient-to-t from-black/60 to-transparent"><h3 class="text-xl font-bold text-white">Caricature</h3></div></div><div class="p-4 bg-white"><p class="text-sm text-slate-800 mb-2">To make or give a comically or grotesquely exaggerated representation of someone or something.</p><div class="bg-blue-50 p-2 rounded mb-2"><p class="text-xs italic text-slate-700">"undefined"</p><p class="text-xs text-slate-500 mt-1">(undefined)</p></div><p class="text-blue-700 font-bold text-sm border-t pt-2">...</p></div></div>
    <div id="import-modal" class="modal fixed inset-0 z-[70] bg-slate-900/80 backdrop-blur-sm flex items-center justify-center p-4 hidden">
        <div class="bg-white rounded-2xl shadow-2xl w-full max-w-3xl h-[80vh] flex flex-col overflow-hidden">
            <div class="p-4 border-b flex justify-between items-center"><h3 id="modal-title" class="font-bold text-lg">Import Transcript</h3><button onclick="closeModal()"><span class="material-symbols-outlined">close</span></button></div>
            <textarea id="import-input" class="w-full flex-1 p-4 font-mono text-xs resize-none outline-none" placeholder="Paste array..."></textarea>
            <div class="p-4 border-t bg-gray-50 flex justify-end"><button id="import-action-btn" class="bg-blue-600 text-white px-6 py-2 rounded-lg font-bold">Load</button></div>
        </div>
    </div>

    <script>
        // --- 1. DATA STORAGE (Keep Empty) ---
        let transcriptData = [{"en":"When I found out my grandmother, my last living grandparent, was dying, my first thought was, \"I need to draw her hands.\" I'm a visual artist, a cartoonist for The New Yorker, and comics writer, so drawing is how I understand much of the world.","cn":""},{"en":"For a long time, my cartoons had been impersonal. Commentary on the world around me, sure, but not really about me. The closest my personal life got to influencing my cartoons were cartoons I lifted from things my friends and family had said around me. It was only after my daughter Ellika was born that my personal life began to creep into my cartoons more.","cn":" (Ellika) "},{"en":"Every artist will tell you that their medium is the highest art form. But they're wrong, because cartooning is in fact the highest art form. Cartoons can say so much with so little. With just a few lines, you can express happiness, smugness and sadness.","cn":""},{"en":"This is called face pareidolia. It's the phenomenon where we see faces in inanimate objects. We see ourselves in these cartoonish faces. They're blank canvases onto which we project ourselves. We see faces everywhere, ourselves in everything. It's evolutionary, a survival technique. But how do we convey complex emotions using just lines? Emotions like grief.","cn":"(Face Pareidolia)"},{"en":"This became really important to me when I found out that my grandmother was dying. I got to know my grandmother, Homa, in a way I didn't get to know any of my other grandparents, because they all lived and died in Iran, a country I've only ever been to twice and not since I was 10.","cn":" Homa "},{"en":"But Homa lived with my parents for the last 10 years of her life, and in that time, she danced the funky chicken at my wedding, she got to hold my newborn daughter, and she told me stories about Iran before the revolution over morning tea, which was usually around noon because she liked to sleep in.","cn":" Homa "},{"en":"I can still, even today, recall the physical sensation of them, like the smoothness of her nails and even their smell. But not the way they looked, which is why when I found out that she was dying, my first instinct was to try to preserve that memory, my memory of her, by drawing her hands.","cn":""},{"en":"Not surprisingly, when I finally made it there to see her, I didn't have a whole lot of time to sit around drawing because I was busy with other things, things like comforting my mom, comforting my grandmother by doing magic and helping my mom and my sister plan for what would come next.","cn":""},{"en":"It's that classic Proustian experience. Life doesn't mean anything while you're moving through it. It's only when you stop to reflect on it that you can make any sense of it. Sense memory, what Proust calls involuntary memory, contains the essence of the past.","cn":""},{"en":"And so if I wanted to tell the story of my grandma, Homa, I would have to begin with a sensation of her hands. When I set out to write this comic, which was published in the L.A. Times, I wanted to take something complicated and big and make it small.","cn":" Homa "},{"en":"Grief is complicated. I needed to reach a point where I could process my loss to distill the experience of losing my last living grandparent into its essential parts and make it clear enough that I could actually grieve.","cn":""},{"en":"My family doesn't tend to deal well with grief, which isn't great because we have so much experience with it. When we're trying to dodge grief, we caricature those we've lost. We focus on and exaggerate their most obvious features, which is why sometimes we'll hear somebody say something like, \"He was a saint.\" He probably wasn't.","cn":""},{"en":"When we do that, we're not actually grieving. We're not confronting the person we've lost as a complex individual, flaws and all. Cartooning has allowed me to go narrow, to find the details that are emblematic, which opens up into a whole, rich, complex person and to my complicated relationship with them.","cn":""},{"en":"And so I focused on my grandmother's hands, the quivering lines of her arthritic fingers, the contours of her veins, now pronounced by the thinning of the skin that she spent so much time caring for. They were beautiful hands, soft from years of moisturizing.","cn":""},{"en":"They were also the hands of someone who was really, really vain, emblematic of the gender norms of an Iranian woman of her period, and as a consequence, incapable of dealing with the process of aging well. For example, I can remember this one time she called me into her room, and when I walked in, she was standing there, arms stretched out to her side and topless, and she said, \"Look what I've become.\"","cn":""},{"en":"They were also the hands that she used as she got older and was less capable of caring for herself, to hit those around her, the people she loved the most. Because I didn't actually get to draw her hands when I last saw her, and I don't have any photos of them, I had to use my own hands to draw her hands.","cn":""},{"en":"So I drew my hands old and spotted, my knuckles gnarled, and I imagined what it would be like for my hands to no longer be able to perform basic, everyday functions, to no longer be able to draw.","cn":""},{"en":"I regularly use myself as a reference for my comics, and through this, I have become my grandmother, I have become my friends and I've even become my five-year-old daughter. It's a process that's allowed me to experience these stories more deeply, in a physical way, allowing me to inhabit them to come to a fuller, richer understanding of them in context.","cn":""},{"en":"If a loved one's death makes us confront our own mortality, then the process of physically transforming myself into my grandmother or my father, who is slowly dying of kidney failure, has made me confront it in a uniquely deep way. It's a process that's also allowed me to reach a place of deeper empathy and of forgiveness.","cn":""},{"en":"For me, art is about communication. It's about expressing what's most important to us and knowing that other people feel the same way, that we're not alone, which is particularly important when we're grieving.","cn":""},{"en":"It's that distillation of something complex into its simplest terms. For you to see your grandmother or a parent in the curved lines of my grandmother's beautiful hands, and to communicate without words, because words were never the point anyway. Thank you.","cn":""}];
        let vocabData = [{"id":"impersonal","word":"Impersonal","ipa":"/mp.sn.l/","pos":"adjective","def":"Lacking human emotion or warmth; not referring to any specific person.","cn_def":"","image":"https://source.unsplash.com/featured/?impersonal"},{"id":"smugness","word":"Smugness","ipa":"/sm.ns/","pos":"noun","def":"Excessive pride in oneself or one's achievements.","cn_def":"","image":"https://source.unsplash.com/featured/?smugness"},{"id":"pareidolia","word":"Pareidolia","ipa":"/pr.do.li./","pos":"noun","def":"The tendency to perceive a specific, often meaningful image in a random or ambiguous visual pattern.","cn_def":" ()","image":"https://source.unsplash.com/featured/?pareidolia"},{"id":"inanimate","word":"Inanimate","ipa":"/nn..mt/","pos":"adjective","def":"Not alive, especially not in the manner of animals and humans.","cn_def":"","image":"https://source.unsplash.com/featured/?inanimate"},{"id":"proustian","word":"Proustian","ipa":"/pru.sti.n/","pos":"adjective","def":"Relating to Marcel Proust or his works, particularly regarding the involuntary recovery of memories through the senses.","cn_def":" ()","image":"https://source.unsplash.com/featured/?proustian"},{"id":"distill","word":"Distill","ipa":"/dstl/","pos":"verb","def":"To extract the essential meaning or most important aspects of something.","cn_def":" ()","image":"https://source.unsplash.com/featured/?distilling"},{"id":"caricature","word":"Caricature","ipa":"/kr..k.tr/","pos":"verb","def":"To make or give a comically or grotesquely exaggerated representation of someone or something.","cn_def":"...","image":"https://source.unsplash.com/featured/?caricature"},{"id":"emblematic","word":"Emblematic","ipa":"/em.blmt.k/","pos":"adjective","def":"Serving as a symbol of a particular quality or concept; representative.","cn_def":"","image":"https://source.unsplash.com/featured/?symbol"},{"id":"arthritic","word":"Arthritic","ipa":"/rrt.k/","pos":"adjective","def":"Affected by or associated with arthritis (painful inflammation and stiffness of the joints).","cn_def":"","image":"https://source.unsplash.com/featured/?arthritis"},{"id":"gnarled","word":"Gnarled","ipa":"/nrld/","pos":"adjective","def":"Knobbly, rough, and twisted, especially with age.","cn_def":"() ","image":"https://source.unsplash.com/featured/?gnarled"},{"id":"mortality","word":"Mortality","ipa":"/mrtl..ti/","pos":"noun","def":"The state of being subject to death.","cn_def":"","image":"https://source.unsplash.com/featured/?mortality"}];
        let currentMode = '';

        // --- APP LOGIC ---
        const modal = document.getElementById('import-modal');
        const inputArea = document.getElementById('import-input');
        const actionBtn = document.getElementById('import-action-btn');
        const floatingCard = document.getElementById('floating-card');

        function openModal(mode) {
            currentMode = mode;
            modal.classList.remove('hidden');
            inputArea.value = ''; inputArea.focus();
            document.getElementById('modal-title').innerText = mode === 'transcript' ? "Import Transcript" : "Import Vocabulary";
            actionBtn.onclick = () => parseData(mode);
        }
        function closeModal() { modal.classList.add('hidden'); }

        function parseData(mode) {
            try {
                let raw = inputArea.value.trim();
                if(!raw) return closeModal();
                if(!raw.startsWith('[')) raw = '[' + raw + ']';
                raw = raw.replace(/,\s*\]$/, ']');
                const data = new Function("return " + raw)();
                
                if(mode === 'transcript') transcriptData = data;
                else vocabData = data;
                
                renderApp();
                closeModal();
            } catch(e) { alert("Format Error: " + e.message); }
        }

        function renderApp() {
            document.getElementById('hero-vocab-count').innerText = vocabData.length;
            renderTranscript();
            renderSidebar();
        }

        function renderTranscript() {
            const container = document.getElementById('transcript-content');
            if(transcriptData.length === 0) return;
            container.innerHTML = "";
            const sortedVocab = [...vocabData].sort((a,b) => b.word.length - a.word.length);

            transcriptData.forEach(seg => {
                let text = seg.en;
                if(vocabData.length > 0) {
                    sortedVocab.forEach(v => {
                        const roots = v.roots || [v.word];
                        const pattern = roots.map(r => r.replace(/[.*+?^${}()|[\]\\]/g, '\\$&')).join('|');
                        text = text.replace(new RegExp(`\\b(${pattern})\\b`, 'gi'), 
                            match => `<span class="vocab-word" data-id="${v.id||v.word}" onmouseenter="showCard(event, '${v.id||v.word}')" onmouseleave="hideCard()">${match}</span>`
                        );
                    });
                }
                container.innerHTML += `<div class="mb-8 group"><p class="mb-2 text-slate-800 text-lg leading-loose">${text}</p>${seg.cn ? `<p class="cn-text hidden text-gray-500 pl-4 border-l-4 border-blue-200 italic mt-2">${seg.cn}</p>` : ''}</div>`;
            });
            applyTranslationState();
        }

        function renderSidebar() {
            const list = document.getElementById('vocab-list');
            if(vocabData.length === 0) return;
            list.innerHTML = "";
            [...vocabData].sort((a,b)=>a.word.localeCompare(b.word)).forEach(v => {
                list.innerHTML += `<li class="p-3 border-b border-gray-50 flex justify-between hover:bg-blue-50 cursor-pointer" onmouseenter="highlight('${v.id||v.word}', true)" onmouseleave="highlight('${v.id||v.word}', false)" onclick="scrollToWord('${v.id||v.word}')"><span class="font-bold text-sm text-slate-700">${v.word}</span><span class="text-xs bg-slate-100 px-2 py-1 rounded">${v.pos||'n.'}</span></li>`;
            });
        }

        function showCard(e, id) {
            const v = vocabData.find(i => (i.id === id) || (i.word === id));
            if(!v) return;
            let img = v.image ? `<div class="h-32 bg-gray-100 overflow-hidden relative"><img src="${v.image}" class="w-full h-full object-cover"><div class="absolute bottom-0 p-3 w-full bg-gradient-to-t from-black/60 to-transparent"><h3 class="text-xl font-bold text-white">${v.word}</h3></div></div>` : `<div class="p-4 bg-blue-600"><h3 class="text-xl font-bold text-white">${v.word}</h3></div>`;
            
            floatingCard.innerHTML = `${img}<div class="p-4 bg-white"><p class="text-sm text-slate-800 mb-2">${v.def}</p><div class="bg-blue-50 p-2 rounded mb-2"><p class="text-xs italic text-slate-700">"${v.example}"</p><p class="text-xs text-slate-500 mt-1">(${v.cn_example})</p></div><p class="text-blue-700 font-bold text-sm border-t pt-2">${v.cn_def}</p></div>`;
            
            const rect = e.target.getBoundingClientRect();
            let top = rect.bottom + 10;
            if(window.innerHeight - rect.bottom < 350) top = rect.top - 10 - floatingCard.offsetHeight; 
            
            floatingCard.style.left = Math.min(rect.left, window.innerWidth - 340) + 'px';
            floatingCard.style.top = top + 'px';
            floatingCard.classList.remove('hidden');
        }
        function hideCard() { floatingCard.classList.add('hidden'); }

        let showCN = false;
        function toggleTranslations() { showCN = !showCN; applyTranslationState(); }
        function applyTranslationState() { document.querySelectorAll('.cn-text').forEach(el => el.classList.toggle('hidden', !showCN)); }
        
        function highlight(id, active) { document.querySelectorAll(`.vocab-word[data-id="${id}"]`).forEach(s => s.style.backgroundColor = active ? '#2563eb' : ''); document.querySelectorAll(`.vocab-word[data-id="${id}"]`).forEach(s => s.style.color = active ? '#fff' : ''); }
        function scrollToWord(id) { const el = document.querySelector(`.vocab-word[data-id="${id}"]`); if(el) { el.scrollIntoView({behavior:'smooth', block:'center'}); } }

        function downloadHTML() {
            const docClone = document.documentElement.cloneNode(true);
            docClone.querySelector('#action-buttons').remove();
            let html = docClone.outerHTML;
            html = html.replace(/let transcriptData = \[\];/, `let transcriptData = ${JSON.stringify(transcriptData)};`);
            html = html.replace(/let vocabData = \[\];/, `let vocabData = ${JSON.stringify(vocabData)};`);
            const a = document.createElement('a');
            a.href = URL.createObjectURL(new Blob([html], {type: 'text/html'}));
            a.download = 'study_guide.html';
            a.click();
        }
        
        if (transcriptData.length > 0 || vocabData.length > 0) renderApp();
    </script>

</body></html>